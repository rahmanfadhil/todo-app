<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Todo App (alpha)</title>
  <link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
  <link rel="stylesheet" href="style/animate.css">
  <link rel="stylesheet" href="style/index.css">
</head>

<body>
  <div class="root">

    <header>
      <img src="assets/notebook.png" alt="note" width="80px" align="left">
      <h1>Todo App (alpha)</h1>
      <nav>
        <a href="index.html">Home</a> | <a href="app.html" class="active">App</a> | <a href="screenshot.html">Screenshots</a>
      </nav>
    </header>

    <main class="main-container">
      <section class="container sidebar animated fadeInDown">
        <h1>Login</h1>
        <input type="email" name="email" placeholder="Insert your email"><br>
        <input type="password" name="password" placeholder="Insert your password"><br>
        <input type="submit" name="submit" value="LOGIN">
      </section>
      <section class="container normal animated fadeInDown">
        <div id="input">
          <input id="inputText" type="text">
          <input onclick="addTodo()" type="button" value="SUBMIT">
        </div>
        <div id="output">
          <div>
            <span>Input Data Todo</span>
            <i class="fa fa-trash"></i>
            <i class="fa fa-edit"></i>
          </div>
          <div>
            <span>Input Data Todo</span>
            <i class="fa fa-trash"></i>
            <i class="fa fa-edit"></i>
          </div>
          <div>
            <span>Input Data Todo</span>
            <i class="fa fa-trash"></i>
            <i class="fa fa-edit"></i>
          </div>
          <div>
            <span>Input Data Todo</span>
            <i class="fa fa-trash"></i>
            <i class="fa fa-edit"></i>
          </div>
        </div>
        <div id="input">
          <input id="search" type="text">
          <input onclick="searchTodo()" type="button" value="SEARCH">
        </div>
      </section>
    </main>

    <footer>
      <span>Copyright &copy; 2018</span>
    </footer>

    <script type="text/javascript">
      const input = document.getElementById('inputText')
      const output = document.getElementById('output')
      const search = document.getElementById('search')

      var store = [] // Temporary array

      // Function for add list into DOM
      const showList = function() {
        output.innerHTML = ""; // Clear the output field
        store.forEach((data, index) => { // Display every single data in store array
          var e = document.createElement('div');
          e.id = index;
          e.innerHTML = `
            <span>${data}</span>
            <i onclick="deleteTodo(${index})" class="fa fa-trash"></i>
            <i onclick="editTodo(${index})" class="fa fa-edit"></i>
          `;
          output.appendChild(e)
        })
      }

      // Check if localStorage.data exist
      if (localStorage.data) {
        store = JSON.parse(localStorage.data) // Add previous data to store array
        showList() // Show list
      }

      // Function for add todo
      const addTodo = function() {
        store.push(input.value) // push data to store array
        localStorage.data = JSON.stringify(store) // Add list to localStorage
        showList() // Show list
      }

      // Function for delete todo
      const deleteTodo = function(index) {
        store.splice(index, 1) // Delete data from store
        localStorage.data = JSON.stringify(store); // Add list to localStorage
        showList() // Show list
      }

      // Function for clear todo
      const clearTodo = function() {
        store = [] // Clear the store array
        output.innerHTML = "" // Clear the list DOM
        localStorage.clear() // Clear the localStorage
      }

      // Function for edit todo
      const editTodo = function(index) {
        let edit = prompt('Edit Text') // Ask wih prompt
        store[index] = edit // Edit the store array
        localStorage.data = JSON.stringify(store); // Save to localStorage
        showList() // Show list
      }

      // Function for search todo
      const searchTodo = function() {
        var text = search.value.toLowerCase() // Get the text and set to lowercase
        let find = store.filter(word => word.toLowerCase().includes(text)); // Filer
        alert(find.join(', ')) // Alert the result
      }
    </script>
  </div>
</body>

</html>
